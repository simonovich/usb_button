### USB Button

USB Button - это USB-кнопка с подсветкой, которой можно управлять через Internet по MQTT протоколу.
Данный проект предоставляет возможность использовать несколько таких кнопок для распределения доступа к некоему общему ресурсу путем мониторинга его состояния.

Допустим, есть 2 пользователя которые работают над одним и тем же проектом. Брать проект в работу можно только по очереди.
При помощи USB Button легко организовать такую очередь. Кнопки умеют обмениваться друг с другом своим состоянием.

Кнопка работает как тумблер ON-OFF, т.е. физически у нее только 2 состояния. На основе анализа этого состояния световой идентификатор может выдавать разные статусы:
* Если кнопка горит ровным светом - вы успешно овладели ресурсом.
* Моргает - переходное состояние. Либо вы послали запрос на ресурс, но еще не получили ответ, либо получили запрос от удаленной кнопки на овладение ресурсом.
* Подсветки нет - значит ресурс на данный момент не ваш.

#### Пример работы
Пользователи подключают по одной кнопке на своё рабочее место.
Перед тем как приступить к работе над проектом следует нажать свою кнопку.
Кнопка начнет мигать. Если через некоторое время кнопка зажглась - можно приступать к работе.
Продолжает мигать - проект на стороне вашего коллеги. Его кнопка тоже начнет мигать сигнализируя о входящем запросе от вас.
Он может завершить работу и принять ваш запрос, для этого достаточно нажать на мигающую кнопку со своей стороны.
В то же время вы можете отменить свой запрос и позолить коллеге продолжить работу над проектом. Для этого тоже достаточно одного нажатия кнопки. При этом она погаснет у вызывающего и загорится ровным светом на стороне вызываемого.

Коммуникация между кнопками построена через MQTT протокол. Путём небольших изменений в конфигурации можно управлять рассылкой управляющих команд на одно или несколько подобных устройств.
Можно расширить функционал кнопки, добавить новые команды и функционал. Что позволит интегрировать это решение под свои задачи, расширить варианты использования.


#### Технические детали
Проект можно разбить на 3 части:
- аппаратная
- программная
- системная

На аппаратном уровне это:
- ATtiny85, Arduino Nano либо любой другой микроконтроллер подходящий под требования программы и ваших задач.
Важно наличие Serial-порта и пинов для подключения тактовой кнопки и/или светодиода.
- обычная тактовая кнопка + светодиод с обвязкой, либо готовая кнопка с управляемой подсветкой. Отлично подходят "аркадные" кнопки.

На программном уровне:
- скетч, с использованием прерываний и таймеров. Программа отвечает за обработку сигналов из Serial-порта и событий кнопки.

На системном уровне это скрипт на bash, который интегрируется в систему как демон (сервис). Отвечает за прием/передачу данных между MQTT и Serial.
Там же осуществляется конфигурация проекта.
